<div class="settings-page">
  <!-- HEADER -->
  <div class="page-header">
    <h1>‚öôÔ∏è C√†i ƒê·∫∑t H·ªá Th·ªëng</h1>
    <p class="subtitle">C·∫•u h√¨nh v√† t√πy ch·ªânh h·ªá th·ªëng k·∫ø to√°n</p>
  </div>

  <div class="settings-layout">
    <!-- SIDEBAR -->
    <div class="settings-sidebar">
      <div *ngFor="let section of sections"
           class="sidebar-item"
           [class.active]="activeSection === section.id"
           (click)="activeSection = section.id">
        <span class="icon">{{ section.icon }}</span>
        <span class="name">{{ section.name }}</span>
      </div>
    </div>

    <!-- CONTENT -->
    <div class="settings-content">
      <!-- COMPANY INFO -->
      <div *ngIf="activeSection === 'company'" class="section-content">
        <h2>üè¢ Th√¥ng tin c√¥ng ty</h2>
        <div class="form-grid">
          <div class="form-group full">
            <label>T√™n c√¥ng ty</label>
            <input type="text" [(ngModel)]="companyInfo.name">
          </div>
          <div class="form-group">
            <label>M√£ s·ªë thu·∫ø</label>
            <input type="text" [(ngModel)]="companyInfo.taxCode">
          </div>
          <div class="form-group">
            <label>ƒêi·ªán tho·∫°i</label>
            <input type="text" [(ngModel)]="companyInfo.phone">
          </div>
          <div class="form-group full">
            <label>ƒê·ªãa ch·ªâ</label>
            <input type="text" [(ngModel)]="companyInfo.address">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" [(ngModel)]="companyInfo.email">
          </div>
          <div class="form-group">
            <label>Website</label>
            <input type="text" [(ngModel)]="companyInfo.website">
          </div>
          <div class="form-group">
            <label>Ng∆∞·ªùi ƒë·∫°i di·ªán</label>
            <input type="text" [(ngModel)]="companyInfo.representative">
          </div>
          <div class="form-group">
            <label>Ch·ª©c v·ª•</label>
            <input type="text" [(ngModel)]="companyInfo.position">
          </div>
          <div class="form-group">
            <label>K·∫ø to√°n tr∆∞·ªüng</label>
            <input type="text" [(ngModel)]="companyInfo.accountant">
          </div>
          <div class="form-group">
            <label>S·ªë TK ng√¢n h√†ng</label>
            <input type="text" [(ngModel)]="companyInfo.bankAccount">
          </div>
          <div class="form-group full">
            <label>Ng√¢n h√†ng</label>
            <input type="text" [(ngModel)]="companyInfo.bankName">
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-primary" (click)="saveCompanyInfo()">üíæ L∆∞u thay ƒë·ªïi</button>
        </div>
      </div>

      <!-- ACCOUNTING CONFIG -->
      <div *ngIf="activeSection === 'accounting'" class="section-content">
        <h2>üìä C√†i ƒë·∫∑t k·∫ø to√°n</h2>
        <div class="form-grid">
          <div class="form-group">
            <label>Th√°ng b·∫Øt ƒë·∫ßu nƒÉm t√†i ch√≠nh</label>
            <select [(ngModel)]="systemConfig.fiscalYearStart">
              <option [value]="1">Th√°ng 1</option>
              <option [value]="4">Th√°ng 4</option>
              <option [value]="7">Th√°ng 7</option>
              <option [value]="10">Th√°ng 10</option>
            </select>
          </div>
          <div class="form-group">
            <label>ƒê∆°n v·ªã ti·ªÅn t·ªá</label>
            <select [(ngModel)]="systemConfig.defaultCurrency">
              <option value="VND">VND - Vi·ªát Nam ƒê·ªìng</option>
              <option value="USD">USD - US Dollar</option>
            </select>
          </div>
          <div class="form-group">
            <label>S·ªë ch·ªØ s·ªë th·∫≠p ph√¢n</label>
            <select [(ngModel)]="systemConfig.decimalPlaces">
              <option [value]="0">0</option>
              <option [value]="2">2</option>
            </select>
          </div>
          <div class="form-group">
            <label>ƒê·ªãnh d·∫°ng ng√†y</label>
            <select [(ngModel)]="systemConfig.dateFormat">
              <option value="DD/MM/YYYY">DD/MM/YYYY</option>
              <option value="MM/DD/YYYY">MM/DD/YYYY</option>
              <option value="YYYY-MM-DD">YYYY-MM-DD</option>
            </select>
          </div>
          <div class="form-group">
            <label>Thu·∫ø su·∫•t GTGT m·∫∑c ƒë·ªãnh (%)</label>
            <select [(ngModel)]="systemConfig.defaultVATRate">
              <option [value]="0">0%</option>
              <option [value]="5">5%</option>
              <option [value]="8">8%</option>
              <option [value]="10">10%</option>
            </select>
          </div>
          <div class="form-group">
            <label>Ph∆∞∆°ng ph√°p t√≠nh gi√° v·ªën</label>
            <select [(ngModel)]="systemConfig.costingMethod">
              <option value="AVERAGE">B√¨nh qu√¢n gia quy·ªÅn</option>
              <option value="FIFO">FIFO (Nh·∫≠p tr∆∞·ªõc xu·∫•t tr∆∞·ªõc)</option>
              <option value="SPECIFIC">ƒê√≠ch danh</option>
            </select>
          </div>
        </div>

        <div class="toggle-options">
          <label class="toggle-item">
            <input type="checkbox" [(ngModel)]="systemConfig.autoNumbering">
            <span>T·ª± ƒë·ªông ƒë√°nh s·ªë ch·ª©ng t·ª´</span>
          </label>
          <label class="toggle-item">
            <input type="checkbox" [(ngModel)]="systemConfig.requireApproval">
            <span>Y√™u c·∫ßu duy·ªát ch·ª©ng t·ª´ tr∆∞·ªõc khi ghi s·ªï</span>
          </label>
          <label class="toggle-item">
            <input type="checkbox" [(ngModel)]="systemConfig.allowNegativeStock">
            <span>Cho ph√©p xu·∫•t kho khi t·ªìn √¢m</span>
          </label>
        </div>

        <div class="form-actions">
          <button class="btn btn-primary" (click)="saveSystemConfig()">üíæ L∆∞u c√†i ƒë·∫∑t</button>
        </div>
      </div>

      <!-- VOUCHER CONFIG -->
      <div *ngIf="activeSection === 'voucher'" class="section-content">
        <h2>üìã C·∫•u h√¨nh ch·ª©ng t·ª´</h2>
        <p class="section-desc">Qu·∫£n l√Ω ti·ªÅn t·ªë v√† s·ªë th·ª© t·ª± c·ªßa c√°c lo·∫°i ch·ª©ng t·ª´</p>

        <table class="data-table">
          <thead>
            <tr>
              <th>Lo·∫°i ch·ª©ng t·ª´</th>
              <th>Ti·ªÅn t·ªë</th>
              <th>S·ªë hi·ªán t·∫°i</th>
              <th>S·ªë ti·∫øp theo</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let v of voucherPrefixes">
              <td>{{ v.type }}</td>
              <td><input type="text" [value]="v.prefix" class="input-small"></td>
              <td>{{ v.lastNumber }}</td>
              <td><strong>{{ v.prefix }}-{{ (v.lastNumber + 1).toString().padStart(5, '0') }}</strong></td>
            </tr>
          </tbody>
        </table>

        <div class="form-actions">
          <button class="btn btn-primary">üíæ L∆∞u c·∫•u h√¨nh</button>
        </div>
      </div>

      <!-- NOTIFICATION -->
      <div *ngIf="activeSection === 'notification'" class="section-content">
        <h2>üîî C√†i ƒë·∫∑t th√¥ng b√°o</h2>
        <div class="notification-options">
          <label class="toggle-item">
            <input type="checkbox" checked>
            <span>Th√¥ng b√°o khi c√≥ ch·ª©ng t·ª´ ch·ªù duy·ªát</span>
          </label>
          <label class="toggle-item">
            <input type="checkbox" checked>
            <span>Th√¥ng b√°o khi c√¥ng n·ª£ qu√° h·∫°n</span>
          </label>
          <label class="toggle-item">
            <input type="checkbox" checked>
            <span>Th√¥ng b√°o h·∫°n n·ªôp thu·∫ø</span>
          </label>
          <label class="toggle-item">
            <input type="checkbox">
            <span>Th√¥ng b√°o qua email</span>
          </label>
        </div>
        <div class="form-actions">
          <button class="btn btn-primary">üíæ L∆∞u c√†i ƒë·∫∑t</button>
        </div>
      </div>

      <!-- BACKUP -->
      <div *ngIf="activeSection === 'backup'" class="section-content">
        <h2>üíæ Sao l∆∞u & Kh√¥i ph·ª•c</h2>

        <div class="backup-section">
          <div class="backup-card">
            <div class="backup-icon">üì¶</div>
            <div class="backup-info">
              <h3>Sao l∆∞u d·ªØ li·ªáu</h3>
              <p>T·∫°o b·∫£n sao l∆∞u to√†n b·ªô d·ªØ li·ªáu k·∫ø to√°n</p>
              <span class="backup-note">L·∫ßn sao l∆∞u cu·ªëi: 25/01/2026</span>
            </div>
            <button class="btn btn-primary" (click)="backupData()">Sao l∆∞u ngay</button>
          </div>

          <div class="backup-card">
            <div class="backup-icon">üîÑ</div>
            <div class="backup-info">
              <h3>Kh√¥i ph·ª•c d·ªØ li·ªáu</h3>
              <p>Kh√¥i ph·ª•c d·ªØ li·ªáu t·ª´ file sao l∆∞u</p>
              <span class="backup-warning">‚ö†Ô∏è D·ªØ li·ªáu hi·ªán t·∫°i s·∫Ω b·ªã ghi ƒë√®</span>
            </div>
            <button class="btn btn-secondary" (click)="restoreData()">Ch·ªçn file</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
